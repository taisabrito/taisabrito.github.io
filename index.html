<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grade Hor√°ria 2026.1</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }

        h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        .subtitle {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 400px;
            gap: 20px;
        }

        .turmas-panel {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            max-height: 85vh;
            overflow-y: auto;
        }

        .search-box {
            width: 100%;
            padding: 12px 20px;
            border: 2px solid #e0e0e0;
            border-radius: 25px;
            font-size: 1em;
            margin-bottom: 20px;
            transition: border-color 0.3s;
        }

        .search-box:focus {
            outline: none;
            border-color: #667eea;
        }

        .turma-card {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid transparent;
        }

        .turma-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .turma-card.selected {
            background: #e8f0fe;
            border-color: #667eea;
        }

        .turma-card.conflict {
            background: #fee;
            border-color: #f44336;
            opacity: 0.6;
        }

        .turma-codigo {
            font-weight: bold;
            color: #667eea;
            font-size: 0.9em;
            margin-bottom: 5px;
        }

        .turma-nome {
            font-size: 1.1em;
            font-weight: 600;
            margin-bottom: 8px;
            color: #333;
        }

        .turma-horarios {
            font-size: 0.85em;
            color: #666;
            margin-bottom: 5px;
        }

        .turma-vagas {
            display: inline-block;
            background: #4caf50;
            color: white;
            padding: 3px 10px;
            border-radius: 12px;
            font-size: 0.8em;
            font-weight: 600;
        }

        .sidebar {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .selected-panel, .schedule-grid {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .selected-panel h2, .schedule-grid h2 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .selected-item {
            background: #f0f4ff;
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .selected-item-info {
            flex: 1;
        }

        .selected-item-codigo {
            font-weight: bold;
            color: #667eea;
            font-size: 0.85em;
        }

        .selected-item-nome {
            font-size: 0.9em;
            color: #333;
        }

        .remove-btn {
            background: #f44336;
            color: white;
            border: none;
            padding: 5px 12px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.85em;
            transition: background 0.3s;
        }

        .remove-btn:hover {
            background: #d32f2f;
        }

        .stats {
            display: flex;
            justify-content: space-around;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 2px solid #e0e0e0;
        }

        .stat-item {
            text-align: center;
        }

        .stat-value {
            font-size: 1.8em;
            font-weight: bold;
            color: #667eea;
        }

        .stat-label {
            font-size: 0.85em;
            color: #666;
        }

        .grid-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.75em;
            margin-top: 10px;
        }

        .grid-table th {
            background: #667eea;
            color: white;
            padding: 8px 4px;
            font-weight: 600;
        }

        .grid-table td {
            border: 1px solid #e0e0e0;
            padding: 4px;
            text-align: center;
            height: 30px;
        }

        .grid-table td.occupied {
            background: #667eea;
            color: white;
            font-size: 0.7em;
            font-weight: 600;
        }

        .conflict-warning {
            background: #fff3cd;
            border: 2px solid #ffc107;
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 15px;
            color: #856404;
            font-size: 0.9em;
            display: none;
        }

        .conflict-warning.show {
            display: block;
        }

        .empty-state {
            text-align: center;
            color: #999;
            padding: 30px;
            font-style: italic;
        }

        @media (max-width: 1024px) {
            .main-content {
                grid-template-columns: 1fr;
            }
        }

        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb {
            background: #667eea;
            border-radius: 10px;
        }

        .export-btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 8px 14px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.85em;
            font-weight: 600;
            transition: background 0.3s;
        }

        .export-btn:hover {
            background: #5563c1;
        }

        .hide-for-export {
            display: none !important;
        }

    </style>
</head>
<body>
    
    <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
    
    <div class="container">
        <header>
            <h1>üìö Sele√ß√£o de Turmas</h1>
            <p class="subtitle">Semestre 2026.1 | Sistema Inteligente de Matr√≠cula</p>
        </header>

        <div class="main-content">
            <div class="turmas-panel">
                <select id="cursoSelect" style="
                    width:100%;
                    padding:12px 16px;
                    border-radius:25px;
                    border:2px solid #e0e0e0;
                    font-size:1em;
                    margin-bottom:15px;
                ">
                    <option value="geo">Geografia</option>
                    <option value="si">Sistemas de Informa√ß√£o</option>
                </select>
                <input type="text" class="search-box" id="searchBox" placeholder="üîç Buscar disciplina...">
                <div id="turmasList"></div>
            </div>

            <div class="sidebar" id="exportArea">
                <div class="selected-panel">
                    <h2>Turmas Selecionadas</h2>
                    <div class="conflict-warning" id="conflictWarning">
                        ‚ö†Ô∏è Aten√ß√£o! H√° choques de hor√°rios entre suas turmas.
                    </div>
                    <div id="selectedList"></div>
                    <div class="stats">
                        <div class="stat-item">
                            <div class="stat-value" id="totalTurmas">0</div>
                            <div class="stat-label">Turmas</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="totalCreditos">0</div>
                            <div class="stat-label">Cr√©ditos</div>
                        </div>
                    </div>
                </div>

                <div class="schedule-grid">
                    <h2>Grade Hor√°ria</h2>
                    <div style="display:flex; gap:10px; margin-bottom:10px;">
                        <button onclick="exportImage()" class="export-btn no-export">üì∑ Exportar Imagem</button>
                        <button onclick="exportPDF()" class="export-btn no-export">üìÑ Exportar PDF</button>
                    </div>
                    <table class="grid-table">
                        <thead>
                            <tr>
                                <th>Hor√°rio</th>
                                <th>Seg</th>
                                <th>Ter</th>
                                <th>Qua</th>
                                <th>Qui</th>
                                <th>Sex</th>
                                <th>S√°b</th>
                            </tr>
                        </thead>
                        <tbody id="gridBody"></tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

<script>
function exportPDF() {
    toggleExportElements(true);

    const { jsPDF } = window.jspdf;
    const element = document.getElementById('exportArea');

    html2canvas(element, {
        scale: 2,
        backgroundColor: '#ffffff'
    }).then(canvas => {
        const imgData = canvas.toDataURL('image/png');

        const pdf = new jsPDF('p', 'mm', 'a4');

        const pageWidth = pdf.internal.pageSize.getWidth();
        const pageHeight = pdf.internal.pageSize.getHeight();

        // Tamanho real da imagem
        const imgWidth = canvas.width;
        const imgHeight = canvas.height;

        // Fator de escala para caber na p√°gina
        const ratio = Math.min(
            pageWidth / imgWidth,
            pageHeight / imgHeight
        );

        const renderWidth = imgWidth * ratio;
        const renderHeight = imgHeight * ratio;

        // Centralizar
        const x = (pageWidth - renderWidth) / 2;
        const y = (pageHeight - renderHeight) / 2;

        pdf.addImage(imgData, 'PNG', x, y, renderWidth, renderHeight);
        pdf.save('grade-horaria-2026-1.pdf');

        toggleExportElements(false);
    });
}
</script>

<script>
function toggleExportElements(hide) {
    document.querySelectorAll('.no-export').forEach(el => {
        el.classList.toggle('hide-for-export', hide);
    });
}
</script>

<script>
function exportImage() {
    toggleExportElements(true);

    const element = document.getElementById('exportArea');

    html2canvas(element, {
        scale: 2,
        backgroundColor: '#ffffff'
    }).then(canvas => {
        const link = document.createElement('a');
        link.download = 'grade-horaria-2026-1.png';
        link.href = canvas.toDataURL('image/png');
        link.click();

        toggleExportElements(false);
    });
}
</script>

<script>
    /*
    const turmasSI = [
        {codigo: "DCT0008", nome: "ESTRUTURAS DE DADOS", horarios: "456T34 (02/03/2026 - 11/06/2026), 456T34 7T3 (12/06/2026 - 11/07/2026)", vagas: 50},
        {codigo: "DCT1101", nome: "ALGORITMOS E L√ìGICA DE PROGRAMA√á√ÉO", horarios: "456T56 (02/03/2026 - 11/06/2026), 4567T56 (12/06/2026 - 11/07/2026)", vagas: 55},
        {codigo: "DCT1102", nome: "INTRODU√á√ÉO √Ä INFORM√ÅTICA", horarios: "23T56 (02/03/2026 - 11/07/2026)", vagas: 55},
        {codigo: "DCT1107", nome: "PROGRAMA√á√ÉO ORIENTADA A OBJETOS I", horarios: "24T12 (02/03/2026 - 11/07/2026)", vagas: 50},
        {codigo: "DCT1108", nome: "PROGRAMA√á√ÉO ORIENTADA A OBJETOS II", horarios: "24T34 (02/03/2026 - 11/07/2026)", vagas: 30},
        {codigo: "DCT1110", nome: "PROGRAMA√á√ÉO VISUAL", horarios: "56T12 (02/03/2026 - 11/06/2026), 56T12 7T1 (12/06/2026 - 11/07/2026)", vagas: 30},
        {codigo: "DCT1202", nome: "FUNDAMENTOS DE SISTEMAS DE INFORMA√á√ÉO", horarios: "56T12 (02/03/2026 - 11/06/2026), 56T12 7T1 (12/06/2026 - 11/07/2026)", vagas: 50},
        {codigo: "DCT1301", nome: "FUNDAMENTOS DE MATEM√ÅTICA", horarios: "34T34 (02/03/2026 - 11/07/2026)", vagas: 55},
        {codigo: "DCT1302", nome: "L√ìGICA", horarios: "56T12 (02/03/2026 - 11/06/2026), 567T12 (12/06/2026 - 11/07/2026)", vagas: 55},
        {codigo: "DCT1304", nome: "√ÅLGEBRA LINEAR", horarios: "56T56 (02/03/2026 - 11/06/2026), 56T56 7T5 (12/06/2026 - 11/07/2026)", vagas: 55},
        {codigo: "DCT1309", nome: "MATEM√ÅTICA FINANCEIRA", horarios: "34T56 (02/03/2026 - 11/07/2026)", vagas: 50},
        {codigo: "DCT2101", nome: "SISTEMAS OPERACIONAIS", horarios: "24T12 (02/03/2026 - 11/07/2026)", vagas: 50},
        {codigo: "DCT2202", nome: "PROJETO E ADMINISTRA√á√ÉO DE BANCO DE DADOS", horarios: "35T12 (02/03/2026 - 11/06/2026), 35T12 7T1 (12/06/2026 - 11/07/2026)", vagas: 30},
        {codigo: "DCT2302", nome: "ENGENHARIA DE SOFTWARE II", horarios: "35T34 (02/03/2026 - 11/06/2026), 35T34 7T3 (12/06/2026 - 11/07/2026)", vagas: 30},
        {codigo: "DCT2401", nome: "GEST√ÉO DA INFORMA√á√ÉO E DOS SISTEMAS DE INFORMA√á√ÉO", horarios: "6M1234 (02/03/2026 - 11/06/2026), 6M1234 7M1 (12/06/2026 - 11/07/2026)", vagas: 50},
        {codigo: "DCT3101", nome: "TEORIA GERAL DA ADMINISTRA√á√ÉO", horarios: "56T34 (02/03/2026 - 21/06/2026), 567T34 (22/06/2026 - 11/07/2026)", vagas: 57},
        {codigo: "DCT3102", nome: "ORGANIZA√á√ÉO, SISTEMAS E M√âTODOS", horarios: "2T34 4T56 (02/03/2026 - 11/07/2026)", vagas: 50},
        {codigo: "DCT4101", nome: "ADMINISTRA√á√ÉO DE SERVIDORES DE REDE", horarios: "2T3456 (02/03/2026 - 11/07/2026)", vagas: 30},
        {codigo: "DCT4401", nome: "T√ìPICOS AVAN√áADOS EM PROGRAMA√á√ÉO I", horarios: "34M56 (02/03/2026 - 11/07/2026)", vagas: 30},
        {codigo: "DCT4501", nome: "T√ìPICOS ESPECIAIS EM CI√äNCIA E PRODU√á√ÉO DE CONHECIMENTO", horarios: "5T3456 (02/03/2026 - 11/06/2026), 5T3456 7T6 (12/06/2026 - 11/07/2026)", vagas: 50},
        {codigo: "DCT4502", nome: "M√âTODOS QUANTITATIVOS DE PESQUISA", horarios: "45M12 (02/03/2026 - 11/06/2026), 45M12 7M1 (12/06/2026 - 11/07/2026)", vagas: 50},
        {codigo: "DIR0013", nome: "DIREITO E LEGISLA√á√ÉO SOCIAL", horarios: "35T34 (02/03/2026 - 11/06/2026), 35T34 7T3 (12/06/2026 - 11/07/2026)", vagas: 50}
    ];
    */


    const turmasPorCurso = {
    geo: [
        { codigo: "DGC0194", nome: "QUANTIFICA√á√ÉO EM GEOGRAFIA", horarios: "3N123 (02/03/2026 - 11/07/2026)", vagas: 50 },
        { codigo: "DGC0198", nome: "GEOMORFOLOGIA II", horarios: "2N123 (02/03/2026 - 11/07/2026)", vagas: 50 },
        { codigo: "DGC0199", nome: "CLIMATOLOGIA SISTEM√ÅTICA E REGIONAL", horarios: "3N1234 (02/03/2026 - 11/07/2026)", vagas: 50 },
        { codigo: "DGC0218", nome: "GEOGRAFIA DO RIO GRANDE DO NORTE", horarios: "4N1234 (02/03/2026 - 11/07/2026)", vagas: 50 },
        { codigo: "DGC0236", nome: "GEODIVERSIDADE E GEOPATRIM√îNIO", horarios: "3T1234 (02/03/2026 - 11/07/2026)", vagas: 50 },
        { codigo: "DGC0237", nome: "GEOLOGIA I", horarios: "3M2345 (02/03/2026 - 11/07/2026)", vagas: 50 },
        { codigo: "DGC0240", nome: "CLIMATOLOGIA I", horarios: "4M2345 (02/03/2026 - 11/07/2026)", vagas: 50 },
        { codigo: "DGC0245", nome: "REGI√ÉO E REGIONALIZA√á√ÉO DO ESPA√áO", horarios: "6M12345 (02/03/2026 - 11/07/2026)", vagas: 50 },
        { codigo: "DGC0259", nome: "FUNDAMENTOS DE CARTOGRAFIA", horarios: "5T6 5N1234 (02/03/2026 - 11/07/2026)", vagas: 50 },
        { codigo: "DGC0263", nome: "PLANEJAMENTO URBANO E REGIONAL", horarios: "3N1234 (02/03/2026 - 11/07/2026)", vagas: 50 },
        { codigo: "DGC0264", nome: "ESTUDOS REGIONAIS DO SEMI√ÅRIDO", horarios: "5N1234 (02/03/2026 - 01/07/2026)", vagas: 50 },
        { codigo: "DGC0265", nome: "SENSORIAMENTO REMOTO E FOTOINTERPRETA√á√ÉO", horarios: "2N1234 (02/03/2026 - 11/07/2026)", vagas: 50 },
        { codigo: "DGC0270", nome: "MONOGRAFIA I", horarios: "5N234 6N1 (02/03/2026 - 01/07/2026)", vagas: 50 },
        { codigo: "DGC0271", nome: "PLANEJAMENTO E GEST√ÉO AMBIENTAL", horarios: "4N1234 (02/03/2026 - 11/07/2026)", vagas: 50 },
        { codigo: "DGC0272", nome: "EXERC√çCIO PROFISSIONAL EM GEOGRAFIA", horarios: "5T6 5N1 (02/03/2026 - 20/05/2026)", vagas: 50 },
        { codigo: "DGC0273", nome: "SEMIN√ÅRIO DE DESENVOLVIMENTO REGIONAL", horarios: "3N123 (02/03/2026 - 11/07/2026)", vagas: 50 },
        { codigo: "DGC0286", nome: "EST√ÅGIO CURRICULAR SUPERVISIONADO DO BACHARELADO", horarios: "4T234 2N1234 (02/03/2026 - 11/07/2026)", vagas: 50 },
        { codigo: "DGC0298", nome: "SEMIN√ÅRIO DE ESTUDOS AMBIENTAIS", horarios: "2T1234 (02/03/2026 - 11/07/2026)", vagas: 50 },
        { codigo: "DGC0301", nome: "M√âTODOS E T√âCNICAS DE PESQUISA CIENT√çFICA", horarios: "2N1234 (02/03/2026 - 11/07/2026)", vagas: 50 },
        { codigo: "DGC0336", nome: "GEOGRAFIA DO CONHECIMENTO E INOVA√á√ÉO", horarios: "5T12345 (02/03/2026 - 11/07/2026)", vagas: 50 },
        { codigo: "DGC0403", nome: "GEOMORFOLOGIA MARINHA", horarios: "5T12345 (02/03/2026 - 11/07/2026)", vagas: 50 },
        { codigo: "DGC0426", nome: "HIST√ìRIA DO PENSAMENTO GEOGR√ÅFICO", horarios: "2M1234 (02/03/2026 - 11/07/2026)", vagas: 50 },
        { codigo: "DHG0214", nome: "GEOGRAFIA URBANA", horarios: "4N1234 (02/03/2026 - 11/07/2026)", vagas: 50 },
        { codigo: "DHG0235", nome: "SEMIN√ÅRIO DE GEOGRAFIA DA AM√âRICA LATINA", horarios: "3T1234 (02/03/2026 - 11/07/2026)", vagas: 50 },
        { codigo: "DHG0418", nome: "PESQUISA E ENSINO EM GEOGRAFIA", horarios: "2T1234 (02/03/2026 - 11/07/2026)", vagas: 50 },
    ],

    si: [
        {codigo: "DCT0008", nome: "ESTRUTURAS DE DADOS", horarios: "456T34 (02/03/2026 - 11/06/2026), 456T34 7T3 (12/06/2026 - 11/07/2026)", vagas: 50},
        {codigo: "DCT1101", nome: "ALGORITMOS E L√ìGICA DE PROGRAMA√á√ÉO", horarios: "456T56 (02/03/2026 - 11/06/2026), 4567T56 (12/06/2026 - 11/07/2026)", vagas: 55},
        {codigo: "DCT1102", nome: "INTRODU√á√ÉO √Ä INFORM√ÅTICA", horarios: "23T56 (02/03/2026 - 11/07/2026)", vagas: 55},
        {codigo: "DCT1107", nome: "PROGRAMA√á√ÉO ORIENTADA A OBJETOS I", horarios: "24T12 (02/03/2026 - 11/07/2026)", vagas: 50},
        {codigo: "DCT1108", nome: "PROGRAMA√á√ÉO ORIENTADA A OBJETOS II", horarios: "24T34 (02/03/2026 - 11/07/2026)", vagas: 30},
        {codigo: "DCT1110", nome: "PROGRAMA√á√ÉO VISUAL", horarios: "56T12 (02/03/2026 - 11/06/2026), 56T12 7T1 (12/06/2026 - 11/07/2026)", vagas: 30},
        {codigo: "DCT1202", nome: "FUNDAMENTOS DE SISTEMAS DE INFORMA√á√ÉO", horarios: "56T12 (02/03/2026 - 11/06/2026), 56T12 7T1 (12/06/2026 - 11/07/2026)", vagas: 50},
        {codigo: "DCT1301", nome: "FUNDAMENTOS DE MATEM√ÅTICA", horarios: "34T34 (02/03/2026 - 11/07/2026)", vagas: 55},
        {codigo: "DCT1302", nome: "L√ìGICA", horarios: "56T12 (02/03/2026 - 11/06/2026), 567T12 (12/06/2026 - 11/07/2026)", vagas: 55},
        {codigo: "DCT1304", nome: "√ÅLGEBRA LINEAR", horarios: "56T56 (02/03/2026 - 11/06/2026), 56T56 7T5 (12/06/2026 - 11/07/2026)", vagas: 55},
        {codigo: "DCT1309", nome: "MATEM√ÅTICA FINANCEIRA", horarios: "34T56 (02/03/2026 - 11/07/2026)", vagas: 50},
        {codigo: "DCT2101", nome: "SISTEMAS OPERACIONAIS", horarios: "24T12 (02/03/2026 - 11/07/2026)", vagas: 50},
        {codigo: "DCT2202", nome: "PROJETO E ADMINISTRA√á√ÉO DE BANCO DE DADOS", horarios: "35T12 (02/03/2026 - 11/06/2026), 35T12 7T1 (12/06/2026 - 11/07/2026)", vagas: 30},
        {codigo: "DCT2302", nome: "ENGENHARIA DE SOFTWARE II", horarios: "35T34 (02/03/2026 - 11/06/2026), 35T34 7T3 (12/06/2026 - 11/07/2026)", vagas: 30},
        {codigo: "DCT2401", nome: "GEST√ÉO DA INFORMA√á√ÉO E DOS SISTEMAS DE INFORMA√á√ÉO", horarios: "6M1234 (02/03/2026 - 11/06/2026), 6M1234 7M1 (12/06/2026 - 11/07/2026)", vagas: 50},
        {codigo: "DCT3101", nome: "TEORIA GERAL DA ADMINISTRA√á√ÉO", horarios: "56T34 (02/03/2026 - 21/06/2026), 567T34 (22/06/2026 - 11/07/2026)", vagas: 57},
        {codigo: "DCT3102", nome: "ORGANIZA√á√ÉO, SISTEMAS E M√âTODOS", horarios: "2T34 4T56 (02/03/2026 - 11/07/2026)", vagas: 50},
        {codigo: "DCT4101", nome: "ADMINISTRA√á√ÉO DE SERVIDORES DE REDE", horarios: "2T3456 (02/03/2026 - 11/07/2026)", vagas: 30},
        {codigo: "DCT4401", nome: "T√ìPICOS AVAN√áADOS EM PROGRAMA√á√ÉO I", horarios: "34M56 (02/03/2026 - 11/07/2026)", vagas: 30},
        {codigo: "DCT4501", nome: "T√ìPICOS ESPECIAIS EM CI√äNCIA E PRODU√á√ÉO DE CONHECIMENTO", horarios: "5T3456 (02/03/2026 - 11/06/2026), 5T3456 7T6 (12/06/2026 - 11/07/2026)", vagas: 50},
        {codigo: "DCT4502", nome: "M√âTODOS QUANTITATIVOS DE PESQUISA", horarios: "45M12 (02/03/2026 - 11/06/2026), 45M12 7M1 (12/06/2026 - 11/07/2026)", vagas: 50},
        {codigo: "DIR0013", nome: "DIREITO E LEGISLA√á√ÉO SOCIAL", horarios: "35T34 (02/03/2026 - 11/06/2026), 35T34 7T3 (12/06/2026 - 11/07/2026)", vagas: 50}
    ]
};
    
    let cursoAtual = 'geo';
    let turmas = turmasPorCurso[cursoAtual];
    let selectedTurmas = [];

    function parseHorarios(horarioStr) {
        const slots = [];
        const parts = horarioStr.split(',').map(p => p.trim());
        
        parts.forEach(part => {
            const match = part.match(/([2-7]+)([MTN])(\d+)/g);
            if (match) {
                match.forEach(h => {
                    const dias = h.match(/[2-7]+/)[0].split('');
                    const turno = h.match(/[MTN]/)[0];
                    const horas = h.match(/\d+$/)[0].split('');
                    
                    dias.forEach(dia => {
                        horas.forEach(hora => {
                            slots.push(`${dia}${turno}${hora}`);
                        });
                    });
                });
            }
        });
        
        return slots;
    }

    function hasConflict(turma1, turma2) {
        const slots1 = parseHorarios(turma1.horarios);
        const slots2 = parseHorarios(turma2.horarios);
        return slots1.some(s => slots2.includes(s));
    }

    function checkConflicts() {
        const conflicts = [];
        for (let i = 0; i < selectedTurmas.length; i++) {
            for (let j = i + 1; j < selectedTurmas.length; j++) {
                if (hasConflict(selectedTurmas[i], selectedTurmas[j])) {
                    conflicts.push([selectedTurmas[i].codigo, selectedTurmas[j].codigo]);
                }
            }
        }
        return conflicts;
    }

    function renderTurmas(filter = '') {
        const list = document.getElementById('turmasList');
        const filtered = turmas.filter(t => 
            t.codigo.toLowerCase().includes(filter.toLowerCase()) ||
            t.nome.toLowerCase().includes(filter.toLowerCase())
        );

        list.innerHTML = filtered.map(t => {
            const isSelected = selectedTurmas.some(s => s.codigo === t.codigo);
            const hasConflictWithSelected = !isSelected && selectedTurmas.some(s => hasConflict(t, s));
            
            return `
                <div class="turma-card ${isSelected ? 'selected' : ''} ${hasConflictWithSelected ? 'conflict' : ''}" 
                        onclick="toggleTurma('${t.codigo}')">
                    <div class="turma-codigo">${t.codigo}</div>
                    <div class="turma-nome">${t.nome}</div>
                    <div class="turma-horarios">üìÖ ${t.horarios}</div>
                    <span class="turma-vagas">üë• ${t.vagas} vagas</span>
                </div>
            `;
        }).join('');
    }

    function renderSelected() {
        const list = document.getElementById('selectedList');
        const conflicts = checkConflicts();
        
        document.getElementById('conflictWarning').classList.toggle('show', conflicts.length > 0);
        
        if (selectedTurmas.length === 0) {
            list.innerHTML = '<div class="empty-state">Nenhuma turma selecionada</div>';
        } else {
            list.innerHTML = selectedTurmas.map(t => `
                <div class="selected-item">
                    <div class="selected-item-info">
                        <div class="selected-item-codigo">${t.codigo}</div>
                        <div class="selected-item-nome">${t.nome}</div>
                    </div>
                    <button class="remove-btn no-export" onclick="removeTurma('${t.codigo}')">‚úï</button>
                </div>
            `).join('');
        }
        
        document.getElementById('totalTurmas').textContent = selectedTurmas.length;
        document.getElementById('totalCreditos').textContent = selectedTurmas.length * 4;
    }

    function renderGrid() {
        const tbody = document.getElementById('gridBody');
        const horarios = [
            { label: '07h00 √†s 07h50', slots: ['M1'] },
            { label: '07h50 √†s 08h40', slots: ['M2'] },
            { label: '08h55 √†s 09h45', slots: ['M3'] },
            { label: '09h45 √†s 10h35', slots: ['M4'] },
            { label: '10h50 √†s 11h40', slots: ['M5'] },
            { label: '11h40 √†s 12h30', slots: ['M6'] },

            { label: '13h00 √†s 13h50', slots: ['T1'] },
            { label: '13h50 √†s 14h40', slots: ['T2'] },
            { label: '14h55 √†s 15h45', slots: ['T3'] },
            { label: '15h45 √†s 16h35', slots: ['T4'] },
            { label: '16h50 √†s 17h40', slots: ['T5'] },
            { label: '17h40 √†s 18h30', slots: ['T6'] },

            { label: '18h45 √†s 19h35', slots: ['N1'] },
            { label: '19h35 √†s 20h25', slots: ['N2'] },
            { label: '20h35 √†s 21h25', slots: ['N3'] },
            { label: '21h25 √†s 22h15', slots: ['N4'] }
        ];

        const grid = {};
        selectedTurmas.forEach(t => {
            const slots = parseHorarios(t.horarios);
            slots.forEach(slot => {
                const dia = slot[0];
                const horario = slot.substring(1);
                if (!grid[horario]) grid[horario] = {};
                grid[horario][dia] = t.codigo.split('-')[0];
            });
        });

        tbody.innerHTML = horarios.map(h => {
            const cells = ['2', '3', '4', '5', '6', '7'].map(dia => {
                let content = '';
                h.slots.forEach(slot => {
                    if (grid[slot] && grid[slot][dia]) {
                        content = grid[slot][dia];
                    }
                });
                return `<td class="${content ? 'occupied' : ''}">${content}</td>`;
            }).join('');
            
            return `<tr><td><strong>${h.label}</strong></td>${cells}</tr>`;
        }).join('');
    }

    function toggleTurma(codigo) {
        const index = selectedTurmas.findIndex(t => t.codigo === codigo);
        if (index > -1) {
            selectedTurmas.splice(index, 1);
        } else {
            const turma = turmas.find(t => t.codigo === codigo);
            selectedTurmas.push(turma);
        }
        renderTurmas(document.getElementById('searchBox').value);
        renderSelected();
        renderGrid();
    }

    function removeTurma(codigo) {
        toggleTurma(codigo);
    }

    document.getElementById('searchBox').addEventListener('input', (e) => {
        renderTurmas(e.target.value);
    });

    document.getElementById('cursoSelect').addEventListener('change', (e) => {
        cursoAtual = e.target.value;

        // troca o conjunto de turmas
        turmas = turmasPorCurso[cursoAtual];

        // limpa tudo para evitar conflito de c√≥digos
        selectedTurmas = [];

        // limpa busca
        document.getElementById('searchBox').value = '';

        // re-render geral
        renderTurmas();
        renderSelected();
        renderGrid();
    });

    renderTurmas();
    renderSelected();
    renderGrid();
</script>

</body>
</html>